<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SADAT</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'media_sistema/favicon.png' %}">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="{% url 'home' %}">SADAT</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav center-buttons">
                    {% if request.resolver_match.url_name == 'home' %}
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary" href="{% url 'registro_cliente' %}">Soy un Cliente</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link btn btn-outline-primary dropdown-toggle" href="#" id="microempresaDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Soy una Microempresa
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="microempresaDropdown">
                                <li><a class="dropdown-item" href="{% url 'registro_integral' %}">Microempresa Integral</a></li>
                                <li><a class="dropdown-item" href="{% url 'registro_satelite' %}">Microempresa Satélite</a></li>
                            </ul>
                        </li>
                    {% endif %}
                </ul>
                <ul class="navbar-nav ms-auto">
                    {% if user.is_authenticated %}
                        {% if user.tipo == 'cliente' and not user.is_superuser and request.resolver_match.url_name != 'dashboard' %}
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'catalogo_integrales' %}">Catálogo Integrales</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'catalogo_satelites' %}">Catálogo Satélites</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'mis_pedidos' %}">Mis Pedidos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'ver_carrito' %}">Mi Carrito</a>
                        </li>
                        <li class="nav-item">
                        </li>
                        {% endif %}
                        {% if user.tipo == 'satelite' %}
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'gestionar_solicitudes_confeccion' %}">Mis Pedidos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'agregar_servicios' %}">Añadir Servicios</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'gestionar_maquinaria' %}">Gestionar Maquinaria</a>
                        </li>
                        <li class="nav-item">
                            {% if user.empresa_satelite %}
                                <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'reporte_empresa' user.empresa_satelite.id %}">
                                    <i class="fas fa-chart-line me-1"></i>Mis Reportes
                                </a>
                            {% endif %}
                        </li>
                        {% endif %}
                        {% if user.tipo == 'integral' %}
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'gestionar_pedidos' %}">Mis Pedidos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'gestionar_productos' %}">Mis Productos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'gestionar_pedidos_personalizados' %}">Pedidos Personalizados</a>
                        </li>
                        <li class="nav-item">
                            {% if user.empresa_integral %}
                                <a class="nav-link btn btn-outline-primary mx-1" href="{% url 'reporte_empresa' user.empresa_integral.id %}">
                                    <i class="fas fa-chart-line me-1"></i>Mis Reportes
                                </a>
                            {% endif %}
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link btn btn-outline-primary mx-1 dropdown-toggle" href="#" id="materiaPrimaDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Materia Prima
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="materiaPrimaDropdown">
                                <li><a class="dropdown-item" href="{% url 'gestionar_categorias_materia_prima' %}">Categorías</a></li>
                                <li><a class="dropdown-item" href="{% url 'gestionar_materia_prima' %}">Inventario</a></li>
                                <li><a class="dropdown-item" href="{% url 'movimientos_materia_prima' %}">Movimientos</a></li>
                            </ul>
                        </li>
                        {% endif %}
                        {% if user.tipo == 'superusuario' or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'panel_admin_reportes' %}">Reportes de Empresas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'reporte_global' %}">Reportes Generales</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'categorias' %}">Crear Categorías</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'gestionar_usuarios' %}">Gestionar Usuarios</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'supervisar_pagos' %}">Supervisar Pagos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'configuracion_sistema' %}">Configuración IVA</a>
                        </li>
                        {% endif %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'perfil' %}">Perfil</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'logout' %}">Cerrar Sesión</a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}">Iniciar Sesión</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Mensajes de Django -->
    {% if messages %}
        <div class="messages-container">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show position-fixed auto-dismiss-alert" 
                     style="bottom: 200px; right: 20px; z-index: 1050; max-width: 300px;" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="container mt-4">
        {% block content %}
            <h1>Gestión de Quejas</h1>
            <div class="filtro-form">
                <input type="text" placeholder="Fecha Inicio (dd/mm/aaaa)">
                <input type="text" placeholder="Fecha Fin (dd/mm/aaaa)">
                <select>
                    <option>Todos</option>
                </select>
                <select>
                    <option>Todos</option>
                </select>
                <button class="btn-filtrar">Filtrar</button>
                <button class="btn-limpiar">Limpiar Filtros</button>
            </div>
            <table class="tabla-resultados">
                <thead>
                    <tr>
                        <th>Usuario</th>
                        <th>Tipo</th>
                        <th>Descripción</th>
                        <th>Estado</th>
                        <th>Fecha Creación</th>
                        <th>Fecha Resolución</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="7" class="sin-resultados">No hay quejas que coincidan con los filtros seleccionados.</td>
                    </tr>
                </tbody>
            </table>
        {% endblock %}
    </div>

    <!-- Footer -->
    <footer class="footer-custom mt-5">
        <!-- Burbujas animadas de fondo -->
        <div class="bubbles">
            <span style="--i:11;"></span>
            <span style="--i:12;"></span>
            <span style="--i:24;"></span>
            <span style="--i:10;"></span>
            <span style="--i:14;"></span>
            <span style="--i:23;"></span>
            <span style="--i:18;"></span>
            <span style="--i:16;"></span>
            <span style="--i:19;"></span>
            <span style="--i:20;"></span>
            <span style="--i:22;"></span>
            <span style="--i:25;"></span>
            <span style="--i:18;"></span>
            <span style="--i:21;"></span>
            <span style="--i:15;"></span>
            <span style="--i:13;"></span>
            <span style="--i:26;"></span>
            <span style="--i:17;"></span>
            <span style="--i:13;"></span>
            <span style="--i:28;"></span>
        </div>
        
        <div class="container-fluid px-4 py-4 position-relative">
            <div class="row g-4">
                <!-- Sobre SADAT -->
                <div class="col-lg-3 col-md-6">
                    <h5 class="footer-title mb-3">
                        <i class="bi bi-award-fill me-2"></i>SADAT
                    </h5>
                    <p class="footer-text mb-3">
                        Plataforma líder en la conexión de microempresas textiles en Colombia.
                    </p>
                    <p class="footer-text mb-0">
                        <i class="bi bi-geo-alt-fill me-2"></i>Colombia
                    </p>
                </div>

                <!-- Contacto -->
                <div class="col-lg-3 col-md-6">
                    <h5 class="footer-title mb-3">
                        <i class="bi bi-telephone-fill me-2"></i>Contacto
                    </h5>
                    <p class="footer-text mb-2">
                        <i class="bi bi-envelope-fill me-2"></i>
                        <a href="mailto:contacto@sadat.co">contacto@sadat.co</a>
                    </p>
                    <p class="footer-text mb-2">
                        <i class="bi bi-phone-fill me-2"></i>
                        <a href="tel:+573001234567">+57 300 123 4567</a>
                    </p>
                    <p class="footer-text mb-0">
                        <i class="bi bi-clock-fill me-2"></i>Lun - Vie: 8:00 - 18:00
                    </p>
                </div>

                <!-- Enlaces Rápidos -->
                <div class="col-lg-3 col-md-6">
                    <h5 class="footer-title mb-3">
                        <i class="bi bi-link-45deg me-2"></i>Enlaces
                    </h5>
                    <ul class="footer-links list-unstyled mb-0">
                        <li><a href="{% url 'home' %}">Inicio</a></li>
                        {% if user.is_authenticated %}
                            {% if user.tipo == 'cliente' %}
                            <li><a href="{% url 'catalogo_integrales' %}">Catálogo Integrales</a></li>
                            <li><a href="{% url 'catalogo_satelites' %}">Catálogo Satélites</a></li>
                            {% elif user.tipo == 'integral' %}
                            <li><a href="{% url 'gestionar_productos' %}">Mis Productos</a></li>
                            <li><a href="{% url 'gestionar_pedidos' %}">Mis Pedidos</a></li>
                            {% elif user.tipo == 'satelite' %}
                            <li><a href="{% url 'agregar_servicios' %}">Mis Servicios</a></li>
                            {% endif %}
                        {% endif %}
                        <li><a href="#">Términos y Condiciones</a></li>
                        <li><a href="#">Política de Privacidad</a></li>
                    </ul>
                </div>

                <!-- Redes Sociales -->
                <div class="col-lg-3 col-md-6">
                    <h5 class="footer-title mb-3">
                        <i class="bi bi-share-fill me-2"></i>Síguenos
                    </h5>
                    <div class="social-links mb-3">
                        <a href="https://facebook.com" class="social-icon" target="_blank" aria-label="Facebook">
                            <i class="bi bi-facebook"></i>
                        </a>
                        <a href="https://instagram.com" class="social-icon" target="_blank" aria-label="Instagram">
                            <i class="bi bi-instagram"></i>
                        </a>
                        <a href="https://wa.me/573001234567" class="social-icon" target="_blank" aria-label="WhatsApp">
                            <i class="bi bi-whatsapp"></i>
                        </a>
                        <a href="https://twitter.com" class="social-icon" target="_blank" aria-label="Twitter">
                            <i class="bi bi-twitter"></i>
                        </a>
                    </div>
                    <p class="footer-text mb-0">
                        <i class="bi text-danger me-2"></i>
                        Conectando microempresas
                    </p>
                </div>
            </div>

            <!-- Copyright -->
            <div class="footer-bottom mt-4 pt-3 border-top border-secondary">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="footer-text mb-0">
                            © {{ "now"|date:"Y" }} SADAT -  Colombia. Todos los derechos reservados.
                        </p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <p class="footer-text mb-0">
                            Versión 1.0 | Hecho con todo el corazón en Colombia
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
        // Auto-ocultar mensajes de Django después de 1.5 segundos
        document.addEventListener('DOMContentLoaded', function() {
            const autoAlerts = document.querySelectorAll('.auto-dismiss-alert');
            autoAlerts.forEach(alert => {
                setTimeout(() => {
                    const bsAlert = new bootstrap.Alert(alert);
                    bsAlert.close();
                }, 900); // 1.5 segundos
            });
        });

        // Animación suave para scroll interno
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Animación del navbar al hacer scroll
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            const currentScroll = window.scrollY;
            
            if (currentScroll > 50) {
                navbar.style.boxShadow = '0 4px 20px rgba(96, 165, 250, 0.15)';
                navbar.style.padding = '0.75rem 0';
            } else {
                navbar.style.boxShadow = '0 2px 8px rgba(96, 165, 250, 0.08)';
                navbar.style.padding = '1rem 0';
            }
            
            lastScroll = currentScroll;
        });

        // Animación de entrada para elementos
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observar cards y secciones
        document.querySelectorAll('.card, .feature-card, .info-section').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(el);
        });
    </script>
    
    {% block extra_js %}
    {% endblock %}
</body>
</html>